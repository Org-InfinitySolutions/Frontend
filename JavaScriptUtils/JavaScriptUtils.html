<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validação & Formatação de campos de preenchimento</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        input {
            padding: 10px;
            margin: 5px;
            font-size: 16px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .error {
            color: red;
            font-size: 14px;
        }
    </style>
</head>

<body>

    <h2>Validação & Formatação de campos de preenchimento</h2>

    <form id="form">
        <div class="form-group">
            <label for="cpf">CPF:</label>
            <input type="text" id="cpf" name="cpf" maxlength="14" placeholder="Digite o CPF" oninput="formatarCPF()">
            <span id="cpf-error" class="error"></span>
        </div>

        <div class="form-group">
            <label for="cnpj">CNPJ:</label>
            <input type="text" id="cnpj" name="cnpj" maxlength="18" placeholder="Digite o CNPJ"
                oninput="formatarCNPJ()">
            <span id="cnpj-error" class="error"></span>
        </div>

        <div class="form-group">
            <label for="telefone">Telefone:</label>
            <input type="text" id="telefone" name="telefone" maxlength="15" placeholder="Digite o Telefone"
                oninput="formatarTelefone()">
            <span id="telefone-error" class="error"></span>
        </div>

        <div class="form-group">
            <label for="registroGeral">RG:</label>
            <input type="registroGeral" id="registroGeral" name="registroGeral" maxlength="11" placeholder="Digite o RG"
                oninput="formatarRegistroGeral()">
            <span id="registroGeral-error" class="error"></span>
        </div>

        <div class="form-grup">
            <label for="email">E-mail:</label>
            <input type="email" id="email" name="email" placeholder="Digite o E-mail">
            <span id="email-error" class="error"></span>
        </div>

        <button type="button" onclick="validarFormulario()">Enviar</button>
    </form>

    <script>

        function formatarCPF() {
            let cpf = document.getElementById('cpf').value;
            cpf = cpf.replace(/\D/g, '');
            if (cpf.length <= 3) {
                cpf = cpf.replace(/(\d{1,3})/g, '$1');
            } else if (cpf.length <= 6) {
                cpf = cpf.replace(/(\d{3})(\d{1,3})/, '$1.$2');
            } else if (cpf.length <= 9) {
                cpf = cpf.replace(/(\d{3})(\d{3})(\d{1,3})/, '$1.$2.$3');
            } else {
                cpf = cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{1,2})/, '$1.$2.$3-$4');
            }
            document.getElementById('cpf').value = cpf;
        }

        function formatarCNPJ() {
            let cnpj = document.getElementById('cnpj').value;
            cnpj = cnpj.replace(/\D/g, '');
            if (cnpj.length <= 2) {
                cnpj = cnpj.replace(/(\d{2})/, '$1');
            } else if (cnpj.length <= 5) {
                cnpj = cnpj.replace(/(\d{2})(\d{3})/, '$1.$2');
            } else if (cnpj.length <= 8) {
                cnpj = cnpj.replace(/(\d{2})(\d{3})(\d{3})/, '$1.$2.$3');
            } else if (cnpj.length <= 12) {
                cnpj = cnpj.replace(/(\d{2})(\d{3})(\d{3})(\d{4})/, '$1.$2.$3/$4');
            } else {
                cnpj = cnpj.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/, '$1.$2.$3/$4-$5');
            }
            document.getElementById('cnpj').value = cnpj;
        }

        function formatarTelefone() {
            let telefone = document.getElementById('telefone').value;
            telefone = telefone.replace(/\D/g, '');
            if (telefone.length <= 2) {
                telefone = telefone.replace(/(\d{2})/, '($1');
            } else if (telefone.length <= 7) {
                telefone = telefone.replace(/(\d{2})(\d{1,4})/, '($1) $2');
            } else {
                telefone = telefone.replace(/(\d{2})(\d{1,5})(\d{1,4})/, '($1) $2-$3');
            }
            document.getElementById('telefone').value = telefone;
        }

        function formatarRegistroGeral() {
            let registroGeral = document.getElementById('registroGeral').value;
            registroGeral = registroGeral.replace(/\D/g, '');
            if (registroGeral.length <= 2) {
                registroGeral = registroGeral.replace(/(\d{2})/, '$1');
            } else if (registroGeral.length <= 5) {
                registroGeral = registroGeral.replace(/(\d{2})(\d{1,3})/, '$1.$2');
            } else if (registroGeral.length <= 8) {
                registroGeral = registroGeral.replace(/(\d{2})(\d{1,3})(\d{1,3})/, '$1.$2.$3');
            } else {
                registroGeral = registroGeral.replace(/(\d{2})(\d{1,3})(\d{1,3})(\d{1})/, '$1.$2.$3-$4');
            }

            document.getElementById('registroGeral').value = registroGeral;
        }

        function validarFormulario() {
            let cpf = document.getElementById('cpf').value;
            let cnpj = document.getElementById('cnpj').value;
            let telefone = document.getElementById('telefone').value;
            let registroGeral = document.getElementById('registroGeral').value;
            let email = document.getElementById('email').value;
          

            let cpfError = document.getElementById('cpf-error');
            let cnpjError = document.getElementById('cnpj-error');
            let telefoneError = document.getElementById('telefone-error');
            let registroGeralError = document.getElementById('registroGeral-error');
            let emailError = document.getElementById('email-error');

            cpfError.innerHTML = '';
            cnpjError.innerHTML = '';
            telefoneError.innerHTML = '';
            registroGeralError.innerHTML = '';
            emailError.innerHTML = '';

            if (cpf.length > 0 && cpf.length < 14) {
                cpfError.innerHTML = 'CPF inválido. Verifique o formato.do';
            }

            if (cnpj.length > 0 && cnpj.length < 18) {
                cnpjError.innerHTML = 'CNPJ inválido. Verifique o formato.';
            }

            if (telefone.length > 0 && telefone.length < 15) {
                telefoneError.innerHTML = 'Telefone inválido. Verifique o formato.';
            }

            if (registroGeral.length > 0 && registroGeral.length < 11) {
                registroGeralError.innerHTML = 'RG inválido. Verifique o formato.';
            }

            if (cpf === "") {
                cpfError.innerHTML = 'Campo obrigatório';
            }

            if (cnpj === "") {
                cnpjError.innerHTML = 'Campo obrigatório';
            }

            if (telefone === "") {
                telefoneError.innerHTML = 'Campo obrigatório';
            }

            if (registroGeral === "") {
                registroGeralError.innerHTML = 'Campo obrigatório';
            }

            if (email === "") {
                emailError.innerHTML = 'Campo obrigatório';
            }
            else {
                
            let arrobaIndex = email.indexOf('@');
            let pontoIndex = email.indexOf('.', arrobaIndex);

            if (arrobaIndex === -1 || pontoIndex === -1 || pontoIndex < arrobaIndex) {
                emailError.innerHTML = 'E-mail inválido. Verifique o formato.';
            }

        }
    }

    </script>

</body>

</html>